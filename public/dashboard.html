<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Beehiiv Auth</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <div class="card dashboard">
      <div class="card-header">
        <h1>Authentication Successful!</h1>
        <p>You are now logged in via magic link</p>
      </div>
      
      <div class="card-body">
        <div class="user-info">
          <h3>User Information</h3>
          <p>Email: <span id="userEmail">Loading...</span></p>
          <p>User ID: <span id="userId">Loading...</span></p>
          <p>Is Beehiiv Subscriber: <span id="isSubscriber">Loading...</span></p>
        </div>
        
        <h3>JWT Token</h3>
        <div id="tokenDisplay" class="token-box">Loading...</div>
        
        <div class="form-group">
          <button id="verifyTokenBtn" class="btn-primary">Verify Token</button>
          <button id="refreshTokenBtn" class="btn-primary" style="margin-top: 10px; background-color: #6366f1;">Refresh Token</button>
          <button id="logoutBtn" class="btn-primary" style="margin-top: 10px; background-color: #ef4444;">Logout</button>
        </div>
        
        <div id="message" class="message hidden"></div>
        <div id="loader" class="loader hidden"></div>
        
        <div class="api-test-area">
          <h3>Test API with Token</h3>
          <div class="form-group">
            <label for="apiEndpoint">API Endpoint</label>
            <input type="text" id="apiEndpoint" placeholder="/auth/verify" value="/auth/verify">
          </div>
          
          <div class="form-group">
            <label for="apiMethod">HTTP Method</label>
            <select id="apiMethod">
              <option value="GET">GET</option>
              <option value="POST">POST</option>
              <option value="PUT">PUT</option>
              <option value="DELETE">DELETE</option>
            </select>
          </div>
          
          <div class="form-group" id="requestBodyContainer">
            <label for="requestBody">Request Body (JSON)</label>
            <textarea id="requestBody" placeholder='{"key": "value"}'></textarea>
          </div>
          
          <button id="testApiBtn" class="btn-primary" style="background-color: #059669;">Test API Call</button>
          
          <div class="form-group" style="margin-top: 20px;">
            <label>API Response</label>
            <pre id="apiResponse" class="response-box">No response yet</pre>
          </div>
        </div>
      </div>
      
      <div class="card-footer">
        <p>This page demonstrates successful authentication with JWT tokens.</p>
        <p><a href="index.html">Back to login</a></p>
      </div>
    </div>
  </div>
  
  <script src="dashboard.js"></script>
</body>
</html>
